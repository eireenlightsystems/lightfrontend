<app-button-panel #buttonPanel
                  [settingButtonPanel]="settingButtonPanel"
                  (onIns)="ins()"
                  (onUpd)="upd()"
                  (onDel)="del()"
                  (onRefresh)="refresh()"
                  (onSetting)="setting()"
                  (onFilterList)="filterList()"
                  (onPlace)="place()"
                  (onPinDrop)="pinDrop()"
                  (onGroupIn)="groupIn()"
                  (onGroupOut)="groupOut()"
                  (onSwitchOn)="switchOn()"
                  (onSwitchOff)="switchOff()"
></app-button-panel>

<app-filter-table #filterTable
                  *ngIf="this.translate.currentLang === 'ru'"
                  [sourceForFilter]="sourceForFilter"
                  [isMasterGrid]="isMasterGrid"
                  [coordinateX]="null"
                  [coordinateY]="null"
                  (onFilter)="applyFilterFromFilter($event)"
></app-filter-table>
<app-filter-table #filterTable
                  *ngIf="this.translate.currentLang === 'en'"
                  [sourceForFilter]="sourceForFilterEng"
                  [isMasterGrid]="isMasterGrid"
                  [coordinateX]="null"
                  [coordinateY]="null"
                  (onFilter)="applyFilterFromFilter($event)"
></app-filter-table>

<label><b>{{'site.filter.filter' | translate}}: </b>{{filterSelect}}</label>

<div *ngIf="!reloading; else reloadingBlock">
  <!--*ngIf="nodes.length > 0; else empty"-->
  <div>
    <app-jqxgrid #jqxgridComponent
                 *ngIf="this.translate.currentLang === 'ru'"
                 [columnsGrid]="columnsGrid"
                 [listBoxSource]="listBoxSource"
                 [sourceForJqxGrid]="sourceForJqxGrid"
                 (onGetSourceForJqxGrid)="getSourceForJqxGrid()"
                 (onRefreshChildGrid)="refreshChildGrid($event)"
    ></app-jqxgrid>
    <app-jqxgrid #jqxgridComponent
                 *ngIf="this.translate.currentLang === 'en'"
                 [columnsGrid]="columnsGridEng"
                 [listBoxSource]="listBoxSourceEng"
                 [sourceForJqxGrid]="sourceForJqxGrid"
                 (onGetSourceForJqxGrid)="getSourceForJqxGrid()"
                 (onRefreshChildGrid)="refreshChildGrid($event)"
    ></app-jqxgrid>
    <div
      class="center mb2"
      *ngIf="!noMoreItems; else"
    >
      <ng-template #loader>
        <app-loader></app-loader>
      </ng-template>
    </div>
  </div>
  <ng-template #empty>
    <div class="center">{{'site.grid.not-rows' | translate}}</div>
  </ng-template>
</div>

<ng-template #reloadingBlock>
  <app-loader></app-loader>
</ng-template>

<app-edit-form #editForm
               *ngIf="isEditFormInit && this.translate.currentLang === 'ru'"
               [settingWinForEditForm]="settingWinForEditForm"
               [sourceForEditForm]="sourceForEditForm"
               (onGetSourceForEditForm)="getSourceForEditForm()"
               (onDestroyEditForm)="destroyEditForm()"
               (onSaveEditFormBtn)="saveEditFormBtn()"
></app-edit-form>
<app-edit-form #editForm
               *ngIf="isEditFormInit && this.translate.currentLang === 'en'"
               [settingWinForEditForm]="settingWinForEditForm"
               [sourceForEditForm]="sourceForEditFormEng"
               (onGetSourceForEditForm)="getSourceForEditForm()"
               (onDestroyEditForm)="destroyEditForm()"
               (onSaveEditFormBtn)="saveEditFormBtn()"
></app-edit-form>

<app-link-form #linkForm
               *ngIf="isLinkFormInit && this.translate.currentLang === 'ru'"
               [sourceForLinkForm]="sourceForLinkForm"
               (onGetSourceForLinkForm)="getSourceForLinkForm()"
               (onDestroyLinkForm)="destroyLinkForm()"
               (onSaveLinkFormBtn)="saveLinkFormBtn($event)"
></app-link-form>
<app-link-form #linkForm
               *ngIf="isLinkFormInit && this.translate.currentLang === 'en'"
               [sourceForLinkForm]="sourceForLinkFormEng"
               (onGetSourceForLinkForm)="getSourceForLinkForm()"
               (onDestroyLinkForm)="destroyLinkForm()"
               (onSaveLinkFormBtn)="saveLinkFormBtn($event)"
></app-link-form>

<app-event-window #eventWindow
                  [warning]="warningEventWindow"
                  (onOkEvenwinBtn)="okEvenwinBtn()"
></app-event-window>
