<app-button-panel
  [settingButtonPanel]="settingButtonPanel"
  (onIns)="ins()"
  (onUpd)="upd()"
  (onDel)="del()"
  (onRefresh)="refresh()"
  (onFilterNone)="filterNone()"
  (onFilterList)="filterList()"
  (onPlace)="place()"
  (onPinDrop)="pinDrop()"
  (onGroupIn)="groupIn()"
  (onGroupOut)="groupOut()"
  (onSwitchOn)="switchOn()"
  (onSwitchOff)="switchOff()"
></app-button-panel>

<app-filter-table
  *ngIf="isFilterVisible"
  [sourceForFilter]="sourceForFilter"
  (onFilter)="applyFilterFromFilter($event)"
  (onInitSourceFilter)="initSourceFilter()"
></app-filter-table>

<div *ngIf="!reloading; else reloadingBlock">
  <!--*ngIf="fixtures.length > 0; else empty"-->
  <div>
    <app-fixturelist-jqxgrid #fixturelistJqxgridComponent
                             [fixtures]="fixtures"
                             [columnsFixture]="columnsFixture"
                             [listBoxSourceFixture]="listBoxSourceFixture"

                             [geographs]="geographs"
                             [ownerFixtures]="ownerFixtures"
                             [fixtureTypes]="fixtureTypes"
                             [substations]="substations"
                             [contractFixtures]="contractFixtures"
                             [installers]="installers"
                             [heightTypes]="heightTypes"

                             [heightGrid]="heightGrid"
                             [selectionmode]="selectionmode"
                             [isMasterGrid]="isMasterGrid"

                             [selectFixtureId]="selectFixtureId"
                             [selectContractId]="selectContractId"
                             [selectNodeId]="selectNodeId"
                             [fixtureGroupId]="fixtureGroupId"

                             (onRefreshGrid)="refreshGrid()"
                             (onRefreshChildGrid)="refreshChildGrid($event)"
    ></app-fixturelist-jqxgrid>
    <div
      class="center mb2"
      *ngIf="!noMoreFixtures; else "
    >
      <!--<button-->
      <!--class="btn waves-effect grey darken-1 btn-small"-->
      <!--(click)="loadMore()"-->
      <!--*ngIf="!loading; else loader"-->
      <!--&gt;-->
      <!--Загрузить еще-->
      <!--</button>-->
      <ng-template #loader>
        <app-loader></app-loader>
      </ng-template>
    </div>
  </div>
  <ng-template #empty>
    <div class="center">Светильников пока нет</div>
  </ng-template>
</div>

<ng-template #reloadingBlock>
  <app-loader></app-loader>
</ng-template>

